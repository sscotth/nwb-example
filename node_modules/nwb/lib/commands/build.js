'use strict';

exports.__esModule = true;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

var _glob = require('glob');

var _glob2 = _interopRequireDefault(_glob);

var _constants = require('../constants');

var _getUserConfig = require('../getUserConfig');

var _getUserConfig2 = _interopRequireDefault(_getUserConfig);

function buildDemo(args, cb) {
  if (_glob2['default'].sync('demo/').length > 0) {
    require('./build-demo')(args, cb);
  }
}

exports['default'] = function (args, cb) {
  var userConfig = _getUserConfig2['default'](args, { required: true });
  if (userConfig.type === _constants.REACT_APP) {
    require('./build-react-app')(args, cb);
  }
  if (userConfig.type === _constants.WEB_APP) {
    require('./build-web-app')(args, cb);
  } else if (userConfig.type === _constants.REACT_COMPONENT || userConfig.type === _constants.WEB_MODULE) {
    require('./build-module')(args);
    if (userConfig.build.umd) {
      require('./build-umd')(args, function () {
        return buildDemo(args, cb);
      });
    } else {
      buildDemo(args, cb);
    }
  }
};

module.exports = exports['default'];
'use strict';

exports.__esModule = true;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

var _argvSetEnv = require('argv-set-env');

var _argvSetEnv2 = _interopRequireDefault(_argvSetEnv);

var _karmaServer = require('../karmaServer');

var _karmaServer2 = _interopRequireDefault(_karmaServer);

exports['default'] = function (args, cb) {
  _argvSetEnv2['default']();

  // Force the environment to test
  process.env.NODE_ENV = 'test';

  var isCi = process.env.CONTINUOUS_INTEGRATION === 'true';

  console.log('nwb: test');
  _karmaServer2['default'](args, {
    codeCoverage: isCi || !!args.coverage,
    singleRun: isCi || !args.server
  }, cb);
};

module.exports = exports['default'];